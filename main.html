<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>숨은 에너지 찾기</title>
    <!-- 스타일 -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div id="page">
    <div id="fireworksContainer"></div>
    <section id="layout-section">
        <div class="main-container">
            <div class="main-top">
                <div class="btn-wrap">
                    <a href="/event.html" class="btn-game-start"><img class="img" src="/images/btn-game-start.png" alt="게임시작"></a>
                    <div class="btn-group">
                        <button class="btn-game-rule"><img class="img" src="/images/btn-game-rule.png" alt="게임방법"></button>
                        <button class="btn-game-rank"><img class="img" src="/images/btn-today-rank.png" alt="오늘의 랭킹 확인"></button>
                    </div>
                </div>
            </div>
            <div class="main-cont">
                <div class="main-copy mx-auto"><img class="img" src="/images/main-copy.jpg" alt="전 세계 속 SK의 숨은 에너지 10개 찾고 레고 블록팩 받자!" /></div>
                <ul class="main-info">
                    <li><strong>이벤트 기간</strong> : 12/9(월)~12/22(일)</li>
                    <li><strong>당첨자발표</strong> : 12/25 (문자 발표)</li>
                    <li class="indent"><strong>경품</strong> : SK이노베이션 옥스포드 레고 블록팩 (랜덤 1,500명 선정)</li>
                </ul>
                
                <button id="kakao-share-btn" class="btn-kakao-share mx-auto">카카오톡 공유하기</button>

                <div class="notice">
                    <h2>이벤트 유의사항</h2>
                    <ul>
                        <li>이벤트 기간은 12/9(월)~12/22(일)까지 이며, 당첨자 발표는 12/25(수) 문자로 발송됩니다.</li>
                        <li>게임 결과와 관계없이 참여하신 분들 중 랜덤으로 1,000명을 선정하여 경품을 드립니다.</li>
                        <li>당첨자 문자 발표 내 주소 입력 링크를 통해 주소를 입력해 주셔야 경품이 발송되며, 주소를 잘못 기입해주실 경우 경품 발송이 불가할 수 있습니다.</li>
                        <li>지정 기간 내 정보 회신이 없을 시(문자 발송 후 일주일), 당첨이 취소 됩니다.</li>
                        <li>경품은 당첨자 정보 취합 후 1/13(월) 이후에 일괄 발송 됩니다.</li>
                        <li>게임 랭킹은 참여 정보 기준, 플레이어의 최신 스코어로 산정됩니다</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>
    <footer id="footer">
        <p>SK이노베이션(주) 서울특별시 종로구 종로 26 SK빌딩<br />
            사업자등록번호 101-86-32319 전화 02-2121-5114<br />
            ⓒ 2024 SK innovation Co., Ltd</p>
    </footer>
</div>

<!-- 게임 방법 -->
<div id="gameRuleLayer" class="layer-popup">
    <div class="dimm"></div>
    <div class="content">
        <h2>게임 방법</h2>
        <button id="close-rule" type="button" class="btn-style">
            닫기
        </button>
    </div>
</div>

<!-- 오늘의 랭킹 -->
<div id="gameRankLayer" class="layer-popup">
    <div class="dimm"></div>
    <div class="content">
        <h2>오늘의 랭킹</h2>
        <div class="rank-content">
            <ul class="rank-list">
                <!-- 랭킹 데이터  -->
            </ul>
        </div>
        <button id="close-rank" type="button" class="btn-style">
            닫기
        </button>
    </div>
</div>

<script src="/js/common.js"></script>
<script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
<script>
    // 테스트용 랭킹 데이터
    const mockRankData = [
        { nickname: "에너지왕123", timer: 65.22 },
        { nickname: "찾아라SK", timer: 82.22 },
        { nickname: "게임고수", timer: 95.22 },
        { nickname: "SK매니아", timer: 110.22 },
        { nickname: "열심히찾기", timer: 125.22 },
        { nickname: "숨은보물", timer: 138.22 },
        { nickname: "에너지파인더", timer: 145.22 },
        { nickname: "SK러버", timer: 160.22 },
        { nickname: "파워레인저", timer: 180.22 }
    ];


    document.addEventListener('DOMContentLoaded', () => {
        // 메인 상단 반짝이 효과
        startFireworks();

        //오늘의 랭킹 버튼 클릭
        document.querySelector('.btn-game-rank').addEventListener('click', function() {
            const rankList = document.querySelector('.rank-list');
            rankList.innerHTML = ''; // 기존 데이터 초기화
            openModal('gameRankLayer');

            // 테스트용 데이터 사용
            mockRankData.forEach((item, index) => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <span class="rank-num">${index + 1}</span>
                    <span class="rank-name">${item.nickname}</span>
                    <span class="rank-score">${item.timer}초</span>
                `;
                rankList.appendChild(li);
            });

            /* API 연동 예시
            fetch(`https://{DOMAIN}/api/rank`)
                .then(response => response.json())
                .then(data => {
                    data.slice(0, 9).forEach((item, index) => {
                        const li = document.createElement('li');
                        li.innerHTML = `
                            <span class="rank-num">${index + 1}</span>
                            <span class="rank-name">${item.nickname}</span>
                            <span class="rank-score">${item.timer}초</span>
                        `;
                        rankList.appendChild(li);
                    });
                })
                .catch(error => {
                    console.error('랭킹 데이터 로딩 실패:', error);
                });
            */
        });
        //카카오 초기화
        Kakao.init('a7fc4bbe5d956fcc2525283cd9daae87'); //key 변경 요망

        // 카카오 공유하기
        document.getElementById('kakao-share-btn').addEventListener('click', function() {
            Kakao.Share.sendDefault({
                objectType: 'feed',
                content: {
                    title: 'SK찾아 세계속으로',
                    description: '전 세계 속 SK의 숨은 에너지 10개 찾고 레고 블록팩 받자!',
                    imageUrl: `${window.location.href}/images/background.jpg`,
                    link: {
                        mobileWebUrl: window.location.href,
                        webUrl: window.location.href,
                    },
                },
                buttons: [
                    {
                        title: '게임 시작하기',
                        link: {
                            mobileWebUrl: window.location.href,
                            webUrl: window.location.href,
                        },
                    },
                ],
            });
        });
    });

</script>
</body>
</html>